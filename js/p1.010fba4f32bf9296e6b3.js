(()=>{"use strict";const e=[[{code:"backquote",system:!1,label:{en:"`",ru:"Ё"},shiftLabel:{en:"~",ru:"Ё"}},{code:"digit1",system:!1,label:{en:"1",ru:"1"},shiftLabel:{en:"!",ru:"!"}},{code:"digit2",system:!1,label:{en:"2",ru:"2"},shiftLabel:{en:"@",ru:'"'}},{code:"digit3",system:!1,label:{en:"3",ru:"3"},shiftLabel:{en:"#",ru:"№"}},{code:"digit4",system:!1,label:{en:"4",ru:"4"},shiftLabel:{en:"$",ru:";"}},{code:"digit5",system:!1,label:{en:"5",ru:"5"},shiftLabel:{en:"%",ru:"%"}},{code:"digit6",system:!1,label:{en:"6",ru:"6"},shiftLabel:{en:"^",ru:":"}},{code:"digit7",system:!1,label:{en:"7",ru:"7"},shiftLabel:{en:"&",ru:"?"}},{code:"digit8",system:!1,label:{en:"8",ru:"8"},shiftLabel:{en:"*",ru:"*"}},{code:"digit9",system:!1,label:{en:"9",ru:"9"},shiftLabel:{en:"(",ru:"("}},{code:"digit0",system:!1,label:{en:"0",ru:"0"},shiftLabel:{en:")",ru:")"}},{code:"minus",system:!1,label:{en:"-",ru:"-"},shiftLabel:{en:"_",ru:"_"}},{code:"equal",system:!1,label:{en:"=",ru:"="},shiftLabel:{en:"+",ru:"+"}},{code:"backspace",system:!0,label:"BACKSPACE"}],[{code:"tab",system:!0,label:"TAB"},{code:"KeyQ",system:!1,label:{en:"Q",ru:"Й"},shiftLabel:{en:"Q",ru:"Й"}},{code:"keyW",system:!1,label:{en:"W",ru:"Ц"},shiftLabel:{en:"W",ru:"Ц"}},{code:"keyE",system:!1,label:{en:"E",ru:"У"},shiftLabel:{en:"E",ru:"У"}},{code:"keyR",system:!1,label:{en:"R",ru:"К"},shiftLabel:{en:"R",ru:"К"}},{code:"keyT",system:!1,label:{en:"T",ru:"Е"},shiftLabel:{en:"T",ru:"Е"}},{code:"keyY",system:!1,label:{en:"Y",ru:"Н"},shiftLabel:{en:"Y",ru:"Н"}},{code:"keyU",system:!1,label:{en:"U",ru:"Г"},shiftLabel:{en:"U",ru:"Г"}},{code:"keyI",system:!1,label:{en:"I",ru:"Ш"},shiftLabel:{en:"I",ru:"Ш"}},{code:"keyO",system:!1,label:{en:"O",ru:"Щ"},shiftLabel:{en:"O",ru:"Щ"}},{code:"keyP",system:!1,label:{en:"P",ru:"З"},shiftLabel:{en:"P",ru:"З"}},{code:"bracketLeft",system:!1,label:{en:"[",ru:"Х"},shiftLabel:{en:"{",ru:"Х"}},{code:"bracketRight",system:!1,label:{en:"]",ru:"Ъ"},shiftLabel:{en:"}",ru:"Ъ"}},{code:"backslash",system:!1,label:{en:"\\",ru:"\\"},shiftLabel:{en:"|",ru:"/"}},{code:"delete",system:!0,label:"DEL"}],[{code:"capsLock",system:!0,label:"CAPS LOCK"},{code:"keyA",system:!1,label:{en:"A",ru:"Ф"},shiftLabel:{en:"A",ru:"Ф"}},{code:"keyS",system:!1,label:{en:"S",ru:"Ы"},shiftLabel:{en:"S",ru:"Ы"}},{code:"keyD",system:!1,label:{en:"D",ru:"В"},shiftLabel:{en:"D",ru:"В"}},{code:"keyF",system:!1,label:{en:"F",ru:"А"},shiftLabel:{en:"F",ru:"А"}},{code:"keyG",system:!1,label:{en:"G",ru:"П"},shiftLabel:{en:"G",ru:"П"}},{code:"keyH",system:!1,label:{en:"H",ru:"Р"},shiftLabel:{en:"H",ru:"Р"}},{code:"keyJ",system:!1,label:{en:"J",ru:"О"},shiftLabel:{en:"J",ru:"О"}},{code:"keyK",system:!1,label:{en:"K",ru:"Л"},shiftLabel:{en:"K",ru:"Л"}},{code:"keyL",system:!1,label:{en:"L",ru:"Д"},shiftLabel:{en:"L",ru:"Д"}},{code:"semicolon",system:!1,label:{en:";",ru:"Ж"},shiftLabel:{en:":",ru:"Ж"}},{code:"quote",system:!1,label:{en:"'",ru:"Э"},shiftLabel:{en:'"',ru:"Э"}},{code:"enter",system:!0,label:"ENTER"}],[{code:"shiftLeft",system:!0,label:"SHIFT"},{code:"keyZ",system:!1,label:{en:"Z",ru:"Я"},shiftLabel:{en:"Z",ru:"Я"}},{code:"keyX",system:!1,label:{en:"X",ru:"Ч"},shiftLabel:{en:"X",ru:"Ч"}},{code:"keyC",system:!1,label:{en:"C",ru:"С"},shiftLabel:{en:"C",ru:"С"}},{code:"keyV",system:!1,label:{en:"V",ru:"М"},shiftLabel:{en:"V",ru:"М"}},{code:"keyB",system:!1,label:{en:"B",ru:"И"},shiftLabel:{en:"B",ru:"И"}},{code:"keyN",system:!1,label:{en:"N",ru:"Т"},shiftLabel:{en:"N",ru:"Т"}},{code:"keyM",system:!1,label:{en:"M",ru:"Ь"},shiftLabel:{en:"M",ru:"Ь"}},{code:"comma",system:!1,label:{en:",",ru:"Б"},shiftLabel:{en:"<",ru:"Б"}},{code:"period",system:!1,label:{en:".",ru:"Ю"},shiftLabel:{en:">",ru:"Ю"}},{code:"slash",system:!1,label:{en:"/",ru:"."},shiftLabel:{en:"?",ru:","}},{code:"shiftRight",system:!0,label:"SHIFT"}],[{code:"controlLeft",system:!0,label:"CTRL"},{code:"metaLeft",system:!0,label:"WIN"},{code:"altLeft",system:!0,label:"ALT"},{code:"space",system:!0,label:""},{code:"altRight",system:!0,label:"ALT"},{code:"controlRight",system:!0,label:"CTRL"},{code:"arrowLeft",system:!0,label:"←"},{code:"arrowUp",system:!0,label:"↑"},{code:"arrowDown",system:!0,label:"↓"},{code:"arrowRight",system:!0,label:"→"}]],t=new class{constructor(){this.elements={main:null,textArea:null,keysContainer:null,capsLock:null,shift:null},this.properties={value:"",capsLock:!1,shift:!1,availableLanguages:["en","ru"],language:localStorage.getItem("language")||"en"}}init(){this.elements.main=document.createElement("div"),this.elements.keysContainer=document.createElement("div"),this.elements.main.classList.add("keyboard"),this.elements.keysContainer.classList.add("keyboard__keys"),this.elements.keysContainer.appendChild(this.createKeys());const e=document.createElement("h2");e.innerText="RSS Virtual Keyboard",e.classList.add("title");const t=document.createElement("textarea");t.classList.add("text"),t.autofocus=!0,this.elements.textArea=t;const s=document.createElement("div");s.classList.add("footer"),s.innerText='Virtual keyboard created for the MS Windows\nHotkey to change input language is "Ctrl+Alt"',this.elements.main.appendChild(e),this.elements.main.appendChild(t),this.elements.main.appendChild(this.elements.keysContainer),this.elements.main.appendChild(s),document.body.appendChild(this.elements.main),document.addEventListener("keydown",(e=>{const t=document.querySelector(`#${e.code.toLowerCase()}`);t&&t.classList.add("active"),"CapsLock"===e.code&&this.switchCapsLock(),"ShiftLeft"!==e.code&&"ShiftRight"!==e.code||(this.properties.shift=!0,this.elements.shift=null,this.updateKeyLabels())})),document.addEventListener("keyup",(e=>{const t=document.querySelector(`#${e.code.toLowerCase()}`);t&&t.classList.remove("active"),"ShiftLeft"!==e.code&&"ShiftRight"!==e.code||(this.properties.shift=!1,this.updateKeyLabels()),("ControlLeft"===e.code&&e.altKey||"ControlRight"===e.code&&e.altKey||"AltLeft"===e.code&&e.ctrlKey||"AltRight"===e.code&&e.ctrlKey)&&this.switchLanguage()})),this.elements.textArea.addEventListener("keydown",(e=>{"Tab"===e.code&&(e.preventDefault(),this.addSymbolInTextArea("\t"))})),this.elements.keysContainer.addEventListener("click",(()=>{this.elements.textArea.focus()}))}getSymbol(e){if(e.system)return e.label;const t=this.properties.shift?e.shiftLabel[this.properties.language]:e.label[this.properties.language];return this.properties.capsLock!==this.properties.shift?t.toUpperCase():t.toLowerCase()}addSymbolInTextArea(e){const t=this.elements.textArea,s=t.selectionStart,a=t.selectionEnd;t.value=`${t.value.slice(0,s)}${e}${t.value.slice(a)}`,t.setSelectionRange(s+1,s+1)}switchCapsLock(){this.properties.capsLock=!this.properties.capsLock,this.elements.capsLock.classList.toggle("capslock_on"),this.updateKeyLabels()}switchLanguage(){const e=this.properties.language,t=this.properties.availableLanguages.indexOf(e);var s;t<this.properties.availableLanguages.length-1?this.properties.language=this.properties.availableLanguages[t+1]:[this.properties.language]=this.properties.availableLanguages,this.updateKeyLabels(),s=this.properties.language,localStorage.setItem("language",s)}updateKeyLabels(){e.forEach((e=>{e.forEach((e=>{const t=document.querySelector(`#${e.code.toLowerCase()}`);t.childNodes[0]&&(t.childNodes[0].textContent=this.getSymbol(e))}))}))}createKeys(){const t=document.createDocumentFragment(),s=document.createElement("span");return s.classList.add("light"),e.forEach((e=>{const a=document.createElement("div");a.classList.add("keyboard__line"),e.forEach((e=>{const t=document.createElement("button");switch(t.classList.add("keyboard__key"),t.id=e.code.toLowerCase(),t.textContent=this.getSymbol(e),e.code){case"controlLeft":case"controlRight":case"altLeft":case"altRight":case"metaLeft":break;case"tab":t.addEventListener("click",(()=>{this.addSymbolInTextArea("\t")}));break;case"backspace":t.addEventListener("click",(()=>{const e=this.elements.textArea,t=e.selectionEnd,s=t===e.selectionStart?e.selectionStart-1:e.selectionStart;s>=0&&(e.value=e.value.slice(0,s)+e.value.slice(t),e.selectionStart=s,e.selectionEnd=s)}));break;case"delete":t.addEventListener("click",(()=>{const e=this.elements.textArea,t=e.selectionStart,s=t===e.selectionEnd?e.selectionEnd+1:e.selectionEnd;e.value=e.value.slice(0,t)+e.value.slice(s),e.selectionStart=t,e.selectionEnd=t}));break;case"capsLock":this.elements.capsLock=t,t.appendChild(s),t.addEventListener("click",(()=>{this.switchCapsLock()}));break;case"shiftLeft":case"shiftRight":t.addEventListener("click",(e=>{this.properties.shift&&!this.elements.shift||(this.properties.shift?(this.elements.shift.classList.remove("active"),this.elements.shift=null):e.currentTarget.classList.add("active"),this.elements.shift=e.currentTarget,this.properties.shift=!this.properties.shift,this.updateKeyLabels())}));break;case"space":t.addEventListener("click",(()=>{this.addSymbolInTextArea(" ")}));break;case"enter":t.addEventListener("click",(()=>{this.addSymbolInTextArea("\n")}));break;default:t.addEventListener("click",(t=>{const s=this.getSymbol(e);this.addSymbolInTextArea(s),!t.shiftKey&&this.properties.shift&&(this.properties.shift=!1,this.elements.shift.classList.remove("active"),this.updateKeyLabels())}))}a.appendChild(t)})),t.appendChild(a)})),t}};window.addEventListener("DOMContentLoaded",(()=>{t.init()}))})();